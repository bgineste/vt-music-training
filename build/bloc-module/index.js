(()=>{"use strict";var e,o={485:()=>{const e=window.wp.blocks,o=window.wp.blockEditor,s=window.wp.element,t=window.wp.data;window.wp.i18n;const n=window.wp.components,l=window.ReactJSXRuntime,r=[{attributes:{cheminFichiersModule:{type:"string",default:""},titreModule:{type:"string",default:""},hasIndexOeuvre:{type:"boolean",default:!1}},save:function(e){const s=o.useBlockProps.save(),{attributes:{titreModule:t,hasIndexOeuvre:n}}=e;return(0,l.jsxs)("div",{...s,className:"vt--un-module",children:[(0,l.jsxs)("div",{className:"vt--titre-et-bouton-esc",children:[(0,l.jsx)("h4",{className:"vt--titre-de-morceau",children:t}),(0,l.jsxs)("label",{className:"vt--bouton__switch",children:[(0,l.jsx)("input",{className:"vt--bouton-bloc-esc",type:"checkbox"}),(0,l.jsx)("span",{className:"vt--bouton__slider vt--bouton__round"})]})]}),(0,l.jsxs)("div",{className:"vt--bloc-esc",children:[(0,l.jsx)(o.InnerBlocks.Content,{}),n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"vt--bouton-appel-index-oeuvre alignleft",children:"Index"}),(0,l.jsx)("br",{})]}):(0,l.jsx)("br",{})]})]})}}],c=JSON.parse('{"UU":"vt-music-training/bloc-module"}');(0,e.registerBlockType)(c.UU,{edit:function(e){const r=(0,o.useBlockProps)(),{context:c,attributes:i,setAttributes:a,clientId:u}=e,{"bloc-oeuvre/cheminFichiersOeuvre":d}=c,{cheminFichiersModule:v,titreModule:h,hasIndexOeuvre:m,lyricsPrompter:p}=i,b=function(e,o){const s=(0,t.useSelect)(o=>o("core/block-editor").getBlockRootClientId(e),[e]),n=(0,t.useSelect)(e=>e("core/block-editor").getBlocks(s),[s]);console.log("Parent Client ID:",s),console.log("Sibling Blocks:",n);const l=n.some(e=>e.name===o);return console.log(`Sibling "${o}" exists:`,l),l}(u,"vt-music-training/index-oeuvre");(0,s.useEffect)(()=>{m!==b&&a({hasIndexOeuvre:b})},[b]),(0,s.useEffect)(()=>{!v&&d&&a({cheminFichiersModule:d})},[]);const x=["core/paragraph","vt-music-training/paroles-du-module","vt-music-training/bloc-fichiers-de-travail","vt-music-training/bloc-prononciation","vt-music-training/consignes-du-module"];return console.log("Rendu bloc module",i),(0,l.jsx)("div",{...r,children:e.isSelected?(0,l.jsxs)("div",{children:[(0,l.jsx)(n.TextControl,{label:"Titre du module (nom du morceau, de la pièce, du numéro de l'oeuvre)",value:h,onChange:e=>a({titreModule:e})}),(0,l.jsx)(n.TextControl,{label:"Chemin des fichiers du module",value:v,onChange:e=>a({cheminFichiersModule:e})}),(0,l.jsx)("h5",{children:"Prompteur pour le lecteur"}),console.log("Avant RichText"),(0,l.jsx)(o.RichText,{tagName:"div",className:"vt--lyrics-prompter",value:p,onChange:e=>a({lyricsPrompter:e}),placeholder:"Saisissez le prompter...",allowedFormats:["core/bold","core/italic","core/link","core/underline","core/text-color"]}),console.log("Avant InnerBlocks"),(0,l.jsx)("p",{children:"Insérer ici les blocs qui composent le module : paroles, vidéos, audios, etc."}),(0,l.jsx)(o.InnerBlocks,{allowedBlocks:x,placeholder:"Ajoutez vos blocs ici"}),console.log("Après InnerBlocks")]}):(0,l.jsxs)("div",{children:[console.log("Avant h4"),(0,l.jsx)("h4",{children:h}),console.log("Après h4"),(0,l.jsx)(o.InnerBlocks,{allowedBlocks:x,placeholder:"Ajoutez vos blocs ici"}),console.log("Après innerBlocks 2")]})})},save:function(e){const s=o.useBlockProps.save(),{attributes:{titreModule:t,hasIndexOeuvre:n,lyricsPrompter:r}}=e;return(0,l.jsxs)("div",{...s,className:"vt--un-module",children:[(0,l.jsxs)("div",{className:"vt--titre-et-bouton-esc",children:[(0,l.jsx)("h4",{className:"vt--titre-de-morceau",children:t}),(0,l.jsxs)("label",{className:"vt--bouton__switch",children:[(0,l.jsx)("input",{className:"vt--bouton-bloc-esc",type:"checkbox"}),(0,l.jsx)("span",{className:"vt--bouton__slider vt--bouton__round"})]})]}),(0,l.jsxs)("div",{className:"vt--bloc-esc",children:[(0,l.jsx)(o.InnerBlocks.Content,{}),n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"vt--bouton-appel-index-oeuvre alignleft",children:"Index"}),(0,l.jsx)("br",{})]}):(0,l.jsx)("br",{})]})]})},deprecated:r})}},s={};function t(e){var n=s[e];if(void 0!==n)return n.exports;var l=s[e]={exports:{}};return o[e](l,l.exports,t),l.exports}t.m=o,e=[],t.O=(o,s,n,l)=>{if(!s){var r=1/0;for(u=0;u<e.length;u++){for(var[s,n,l]=e[u],c=!0,i=0;i<s.length;i++)(!1&l||r>=l)&&Object.keys(t.O).every(e=>t.O[e](s[i]))?s.splice(i--,1):(c=!1,l<r&&(r=l));if(c){e.splice(u--,1);var a=n();void 0!==a&&(o=a)}}return o}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[s,n,l]},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={6817:0,757:0};t.O.j=o=>0===e[o];var o=(o,s)=>{var n,l,[r,c,i]=s,a=0;if(r.some(o=>0!==e[o])){for(n in c)t.o(c,n)&&(t.m[n]=c[n]);if(i)var u=i(t)}for(o&&o(s);a<r.length;a++)l=r[a],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},s=globalThis.webpackChunkvt_music_training=globalThis.webpackChunkvt_music_training||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var n=t.O(void 0,[757],()=>t(485));n=t.O(n)})();